(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42abd5a9"],{"0e499":function(t,e,n){"use strict";var a=n("9e88"),r=n.n(a);r.a},"5d893":function(t,e,n){"use strict";var a=n("d260"),r=n.n(a);r.a},"7e93":function(t,e,n){},"7ef7":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"j-app-block"},[n("div",{staticClass:"block_title"},[n("div",{staticStyle:{background:"#fff",padding:"10px 10px 10px"}},[t._v("\n      "+t._s(t.title)+"\n    ")])]),t._t("default")],2)},r=[],s={name:"AppBlock",props:{title:String}},i=s,o=(n("b6cb"),n("2877")),l=Object(o["a"])(i,a,r,!1,null,null,null);e["default"]=l.exports},"93e7":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-section",[n("van-nav-bar",{attrs:{title:t.navTitle,"left-arrow":""},on:{"click-left":t.backRoute}}),n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.pullLoading,callback:function(e){t.pullLoading=e},expression:"pullLoading"}},[n("van-list",{attrs:{finished:t.listFinished,"finished-text":t.finishedText,error:t.listError,"error-text":"请求失败，点击重新加载"},on:{"update:error":function(e){t.listError=e},load:function(e){return t.onLoad()}},model:{value:t.listLoading,callback:function(e){t.listLoading=e},expression:"listLoading"}},t._l(t.applyList,(function(e,a){return n("van-cell",{key:a,attrs:{icon:"description",title:e.desformName,"is-link":""},on:{click:function(n){return t.submitFlow(e)}}},[n("template",{slot:"label"},[n("div",[t._v(t._s(e.bpmTitle))]),n("div",{staticStyle:{"padding-top":"3px"}},[t._v("\n            保存时间:\n            "),n("span",{staticStyle:{"margin-left":"1px"}},[t._v(t._s(e.createTime))])])]),n("div",{attrs:{slot:"right-icon"},slot:"right-icon"},["1"===e.bpmStatus?n("van-tag",{attrs:{plain:"",type:"warning"}},[t._v("流程待提交")]):n("span")],1)],2)})),1)],1)],1)},r=[],s=(n("ac4d"),n("8a81"),n("ac6a"),n("96cf"),n("3b8d")),i=n("7ef7"),o=n("c22a"),l=n("aa8f"),c={name:"tab-draft",components:{AppSection:o["default"],AppBlock:i["default"]},data:function(){return{listError:!1,listLoading:!1,pullLoading:!1,listFinished:!1,finishedText:"没有更多了",pageNo:1,pageSize:10,url:"/process/extActDesignFlowData/list",startProcess:"/process/extActProcess/startDesFormMutilProcess",queryFormDataById:"/desform/data/queryById",applyList:[],navTitle:"审批草稿",flowCodePre:"desform_"}},mounted:function(){},watch:{$route:function(){this.onRefresh()}},methods:{backRoute:function(){this.$router.push({name:"home"})},startDesFormProcess:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n,a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["a"])(this.queryFormDataById,{id:e.desformDataId});case 2:if(n=t.sent,n.success){t.next=6;break}return this.$toast(n.message),t.abrupt("return");case 6:a=n.result.desformDataJson,r={flowCode:this.flowCodePre+e.desformCode,id:e.id,formUrl:"{{DOMAIN_URL}}/desform/detail/"+e.desformCode+"/${BPM_DES_DATA_ID}?token={{TOKEN}}",formUrlMobile:"{{DOMAIN_URL}}/desform/detail/"+e.desformCode+"/${BPM_DES_DATA_ID}?token={{TOKEN}}",jsonData:a},s=this,Object(l["d"])(s.startProcess,r).then((function(t){t.success?s.$toast.success({message:t.message,onClose:function(){s.$router.push({name:"apply"})}}):s.$toast(t.message)}));case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),submitFlow:function(t){if("1"==t.bpmStatus){var e=this;this.$dialog.confirm({title:"提示",message:"确认提交流程吗?"}).then((function(){e.startDesFormProcess(t)})).catch((function(){}))}else this.$toast("流程已提交！")},onRefresh:function(){var t=this;this.pullLoading=!0,this.pageNo=1;var e={pageNo:this.pageNo,pageSize:this.pageSize,column:"createTime",order:"desc"};this.applyList=[],Object(l["a"])(this.url,e).then((function(e){if(t.pullLoading=!1,e.success){t.pageNo++;var n=e.result.records,a=!0,r=!1,s=void 0;try{for(var i,o=n[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var l=i.value;t.applyList.push(l)}}catch(c){r=!0,s=c}finally{try{a||null==o.return||o.return()}finally{if(r)throw s}}}}))},onLoad:function(){var t=this;this.listLoading=!0;var e={pageNo:this.pageNo,pageSize:this.pageSize,column:"createTime",order:"desc"};Object(l["a"])(this.url,e).then((function(e){if(t.listLoading=!1,e.success){t.pageNo++;var n=e.result.records,a=!0,r=!1,s=void 0;try{for(var i,o=n[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var l=i.value;t.applyList.push(l)}}catch(c){r=!0,s=c}finally{try{a||null==o.return||o.return()}finally{if(r)throw s}}(!n||n.length<t.pageSize)&&(t.listFinished=!0)}else t.error=!0})).catch((function(e){t.error=!0}))}}},u=c,d=(n("5d893"),n("2877")),p=Object(d["a"])(u,a,r,!1,null,"21dc5797",null);e["default"]=p.exports},"9e88":function(t,e,n){},b6cb:function(t,e,n){"use strict";var a=n("7e93"),r=n.n(a);r.a},c22a:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"j-app-section"},[t.loading?n("van-loading",{staticStyle:{"padding-top":"100px","text-align":"center"},attrs:{type:"spinner",color:"#1989fa"}}):t._e(),t._t("default")],2)},r=[],s={name:"AppSection",props:{loading:{type:Boolean,default:!1,required:!1}}},i=s,o=(n("0e499"),n("2877")),l=Object(o["a"])(i,a,r,!1,null,null,null);e["default"]=l.exports},d260:function(t,e,n){}}]);